{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://synthviz/./src/audio/oscillator.ts","webpack://synthviz/./src/audio/amp.ts","webpack://synthviz/./src/audio/envelope.ts","webpack://synthviz/./src/audio/filter.ts","webpack://synthviz/./src/audio/lfo.ts","webpack://synthviz/./src/voice.ts","webpack://synthviz/./src/audio/analyser.ts","webpack://synthviz/./src/ui/knob.ts","webpack://synthviz/./src/synth-view.ts","webpack://synthviz/./src/synth.ts","webpack://synthviz/./src/index.ts"],"sourcesContent":["const makeOscillator = (context, n, frequency, type, oct) => {\n    const oscillator = context.createOscillator();\n    const wrapper = {\n        oct,\n        n,\n        oscillator,\n        frequency,\n        type,\n        input: oscillator,\n        output: oscillator,\n        start: () => {\n            oscillator.type = type;\n            oscillator.frequency.value = wrapper.frequency * Math.pow(2, oct - 1);\n            oscillator.start();\n        },\n        changeType: (newType) => { oscillator.type = newType; },\n        changeFrequency: (freq) => { oscillator.frequency.value = freq; },\n        changeOctave: (_octave) => {\n            wrapper.frequency = wrapper.frequency * Math.pow(2, oct - 1);\n        },\n        connect: (node) => {\n            if ('input' in node)\n                oscillator.connect(node.input);\n            else if (node instanceof AudioParam)\n                oscillator.connect(node);\n            else\n                oscillator.connect(node);\n        }\n    };\n    return wrapper;\n};\nexport default makeOscillator;\n","const makeAmp = (context, vol = 0.1) => {\n    const gain = context.createGain();\n    const amplitude = gain.gain;\n    amplitude.value = vol;\n    return {\n        gain,\n        input: gain,\n        output: gain,\n        amplitude,\n        changeAmplitude: (v) => { amplitude.value = v; },\n        connect: (node) => {\n            if ('input' in node)\n                gain.connect(node.input);\n            else if (node instanceof AudioParam)\n                gain.connect(node);\n            else\n                gain.connect(node);\n        }\n    };\n};\nexport default makeAmp;\n","const makeEnvelope = (context) => {\n    let param = null;\n    return {\n        envOn: (attackTime, decayTime, sustainVal, amplitude) => {\n            if (!param)\n                return;\n            const now = context.currentTime;\n            param.cancelScheduledValues(now);\n            param.setValueAtTime(0, now);\n            param.linearRampToValueAtTime(amplitude, now + attackTime);\n            param.linearRampToValueAtTime(amplitude * sustainVal, now + attackTime + decayTime);\n        },\n        envOff: (releaseTime) => {\n            if (!param)\n                return;\n            const now = context.currentTime;\n            param.cancelScheduledValues(0);\n            param.setValueAtTime(param.value, now);\n            param.linearRampToValueAtTime(0, now + releaseTime);\n        },\n        connect: (p) => { param = p; }\n    };\n};\nexport default makeEnvelope;\n","const makeFilter = (context, cutoff = 22) => {\n    const filter = context.createBiquadFilter();\n    filter.type = 'lowshelf';\n    filter.frequency.value = cutoff * 1000;\n    filter.gain.value = 20;\n    return {\n        filter,\n        frequency: filter.frequency,\n        input: filter,\n        output: filter,\n        changeFilter: (newFreq) => { filter.frequency.value = newFreq; },\n        connect: (node) => {\n            if ('input' in node)\n                filter.connect(node.input);\n            else if (node instanceof AudioParam)\n                filter.connect(node);\n            else\n                filter.connect(node);\n        }\n    };\n};\nexport default makeFilter;\n","const makeLFO = (context, frequency) => {\n    const lfo = context.createOscillator();\n    const lfoFrequency = lfo.frequency;\n    lfo.frequency.value = frequency;\n    return {\n        lfo,\n        lfoFrequency,\n        input: lfo,\n        output: lfo,\n        changeFrequency: (newFrequency) => { lfoFrequency.value = newFrequency; },\n        connect: (node) => {\n            if ('input' in node)\n                lfo.connect(node.input);\n            else if (node instanceof AudioParam)\n                lfo.connect(node);\n            else\n                lfo.connect(node);\n        },\n        start: () => { lfo.start(); }\n    };\n};\nexport default makeLFO;\n","import makeOscillator from './audio/oscillator';\nimport makeAmp from './audio/amp';\nimport makeEnvelope from './audio/envelope';\nimport makeFilter from './audio/filter';\nimport makeLFO from './audio/lfo';\nimport makeAnalyser from './audio/analyser';\nconst makeVoice = (context, n, frequency, volume, type1, type2, vol1, vol2, oct1, oct2, cutoff1, cutoff2, vibratoSpeed, vibratoDepth) => {\n    const lfoVibrato = makeLFO(context, vibratoSpeed);\n    const analyser = makeAnalyser(context, frequency);\n    const lfoVibratoAmp = makeAmp(context, vibratoDepth);\n    const oscillator1 = makeOscillator(context, n, frequency, type1, oct1);\n    const oscillator2 = makeOscillator(context, n, frequency, type2, oct2);\n    const amp1 = makeAmp(context, vol1);\n    const amp2 = makeAmp(context, vol2);\n    const envelope1 = makeEnvelope(context);\n    const envelope2 = makeEnvelope(context);\n    const filter1 = makeFilter(context, cutoff1);\n    const filter2 = makeFilter(context, cutoff2);\n    return {\n        frequency,\n        context,\n        n,\n        volume,\n        lfoVibrato,\n        analyser,\n        lfoVibratoAmp,\n        oscillator1,\n        oscillator2,\n        amp1,\n        amp2,\n        envelope1,\n        envelope2,\n        filter1,\n        filter2,\n        connect: () => {\n            lfoVibrato.connect(lfoVibratoAmp);\n            lfoVibratoAmp.connect(oscillator1.oscillator.frequency);\n            lfoVibratoAmp.connect(oscillator2.oscillator.frequency);\n            envelope1.connect(amp1.amplitude);\n            envelope2.connect(amp2.amplitude);\n            oscillator1.connect(amp1);\n            oscillator2.connect(amp2);\n            amp1.connect(filter1);\n            amp2.connect(filter2);\n            filter1.connect(analyser);\n            filter2.connect(analyser);\n            analyser.connect(volume);\n        },\n        changeFrequency: (freq) => {\n            oscillator1.changeFrequency(freq);\n            oscillator2.changeFrequency(freq);\n        },\n        start: (envelope) => {\n            envelope1.envOn(envelope.attack, envelope.decay, envelope.sustain, amp1.amplitude.value);\n            envelope2.envOn(envelope.attack, envelope.decay, envelope.sustain, amp2.amplitude.value);\n            oscillator1.start();\n            oscillator2.start();\n            lfoVibrato.start();\n        },\n        stop: (releaseTime) => {\n            envelope1.envOff(releaseTime);\n            envelope2.envOff(releaseTime);\n            setTimeout(() => {\n                oscillator1.oscillator.stop();\n                oscillator2.oscillator.stop();\n                lfoVibrato.lfo.disconnect(lfoVibratoAmp.gain);\n                lfoVibratoAmp.gain.disconnect(oscillator1.oscillator.frequency);\n                lfoVibratoAmp.gain.disconnect(oscillator2.oscillator.frequency);\n                oscillator1.oscillator.disconnect(amp1.gain);\n                oscillator2.oscillator.disconnect(amp2.gain);\n                amp1.gain.disconnect(filter1.filter);\n                amp2.gain.disconnect(filter2.filter);\n                filter1.filter.disconnect(analyser.analyser);\n                filter2.filter.disconnect(analyser.analyser);\n                analyser.analyser.disconnect(volume.gain);\n            }, releaseTime * 1000);\n        }\n    };\n};\nexport default makeVoice;\n","const makeAnalyser = (context, _frequency) => {\n    const canvas = document.querySelector('#canvas');\n    const analyser = context.createAnalyser();\n    analyser.fftSize = 2048;\n    const bufferLength = analyser.frequencyBinCount;\n    const dataArray = new Uint8Array(bufferLength);\n    const WIDTH = canvas.width;\n    const HEIGHT = canvas.height;\n    const draw = (ctx, freq) => {\n        let color = '#ff00f7';\n        if (freq > 300 && freq <= 400) {\n            color = '#24ff00';\n        }\n        else if (freq > 400) {\n            color = '#f8ff00';\n        }\n        analyser.getByteTimeDomainData(dataArray);\n        ctx.lineWidth = 1.8;\n        ctx.strokeStyle = color;\n        ctx.beginPath();\n        const sliceWidth = WIDTH * 1.0 / bufferLength;\n        let x = 0;\n        for (let i = 0; i < bufferLength; i++) {\n            const v = dataArray[i] / 128.0;\n            const y = v * HEIGHT / 2;\n            if (i === 0) {\n                ctx.moveTo(x, y);\n            }\n            else {\n                ctx.lineTo(x, y);\n            }\n            x += sliceWidth;\n        }\n        ctx.lineTo(canvas.width, canvas.height / 2);\n        ctx.stroke();\n    };\n    return {\n        analyser,\n        input: analyser,\n        output: analyser,\n        draw,\n        connect: (node) => {\n            if ('input' in node)\n                analyser.connect(node.input);\n            else if (node instanceof AudioParam)\n                analyser.connect(node);\n            else\n                analyser.connect(node);\n        }\n    };\n};\nexport default makeAnalyser;\n","const knobMap = new WeakMap();\nconst START = 0.75 * Math.PI;\nconst SWEEP = 1.5 * Math.PI;\nconst drawKnob = (canvas, state) => {\n    const ctx = canvas.getContext('2d');\n    if (!ctx)\n        return;\n    const { value, min, max } = state;\n    const ratio = (value - min) / (max - min);\n    const w = canvas.width;\n    const h = canvas.height;\n    const cx = w / 2;\n    const cy = h / 2;\n    const r = Math.min(w, h) / 2 - 4;\n    ctx.clearRect(0, 0, w, h);\n    ctx.beginPath();\n    ctx.arc(cx, cy, r, START, START + SWEEP);\n    ctx.strokeStyle = '#333';\n    ctx.lineWidth = 4;\n    ctx.stroke();\n    if (ratio > 0) {\n        ctx.beginPath();\n        ctx.arc(cx, cy, r, START, START + SWEEP * ratio);\n        ctx.strokeStyle = '#ff00f7';\n        ctx.lineWidth = 4;\n        ctx.stroke();\n    }\n    const decimals = state.step >= 1 ? 0 : Math.max(0, Math.ceil(-Math.log10(state.step)));\n    const label = value.toFixed(decimals);\n    ctx.fillStyle = 'white';\n    ctx.font = '9px sans-serif';\n    ctx.textAlign = 'center';\n    ctx.textBaseline = 'middle';\n    ctx.fillText(label, cx, cy);\n};\nexport const initKnob = (canvas, min, max, step, initial, onRelease) => {\n    const state = { value: initial, min, max, step, onRelease };\n    knobMap.set(canvas, state);\n    drawKnob(canvas, state);\n    let startY = 0;\n    let startValue = 0;\n    const onMouseMove = (e) => {\n        const delta = startY - e.clientY;\n        const range = max - min;\n        const newValue = Math.min(max, Math.max(min, startValue + (delta / 150) * range));\n        const stepped = Math.round(newValue / step) * step;\n        state.value = Math.min(max, Math.max(min, stepped));\n        drawKnob(canvas, state);\n    };\n    const onMouseUp = () => {\n        document.removeEventListener('mousemove', onMouseMove);\n        document.removeEventListener('mouseup', onMouseUp);\n        state.onRelease(state.value);\n    };\n    canvas.addEventListener('mousedown', (e) => {\n        startY = e.clientY;\n        startValue = state.value;\n        document.addEventListener('mousemove', onMouseMove);\n        document.addEventListener('mouseup', onMouseUp);\n        e.preventDefault();\n    });\n};\nexport const setKnobValue = (canvas, value, fireCallback = false) => {\n    const state = knobMap.get(canvas);\n    if (!state)\n        return;\n    state.value = Math.min(state.max, Math.max(state.min, value));\n    drawKnob(canvas, state);\n    if (fireCallback)\n        state.onRelease(state.value);\n};\nexport const getKnob = (action, osc) => {\n    const selector = osc\n        ? `canvas.knob[data-action=\"${action}\"][data-osc=\"${osc}\"]`\n        : `canvas.knob[data-action=\"${action}\"]`;\n    return document.querySelector(selector);\n};\n","import makeSynth from './synth';\nimport { initKnob, setKnobValue, getKnob } from './ui/knob';\nconst synth = makeSynth();\nexport const synthView = {\n    synth,\n    inc: 0,\n    ctx: document.querySelector('#canvas').getContext('2d'),\n    lastTime: 0,\n    keys: {\n        65: { down: false, n: 40, action: (info) => synthView.startSynth(info) },\n        87: { down: false, n: 41, action: (info) => synthView.startSynth(info) },\n        83: { down: false, n: 42, action: (info) => synthView.startSynth(info) },\n        69: { down: false, n: 43, action: (info) => synthView.startSynth(info) },\n        68: { down: false, n: 44, action: (info) => synthView.startSynth(info) },\n        70: { down: false, n: 45, action: (info) => synthView.startSynth(info) },\n        84: { down: false, n: 46, action: (info) => synthView.startSynth(info) },\n        71: { down: false, n: 47, action: (info) => synthView.startSynth(info) },\n        89: { down: false, n: 48, action: (info) => synthView.startSynth(info) },\n        72: { down: false, n: 49, action: (info) => synthView.startSynth(info) },\n        85: { down: false, n: 50, action: (info) => synthView.startSynth(info) },\n        74: { down: false, n: 51, action: (info) => synthView.startSynth(info) },\n        75: { down: false, n: 52, action: (info) => synthView.startSynth(info) },\n        79: { down: false, n: 53, action: (info) => synthView.startSynth(info) },\n        76: { down: false, n: 54, action: (info) => synthView.startSynth(info) },\n        80: { down: false, n: 55, action: (info) => synthView.startSynth(info) },\n        90: { down: false, n: 0, type: 'octave', dir: 'down', action: (info) => synthView.octave(info) },\n        88: { down: false, n: 0, type: 'octave', dir: 'up', action: (info) => synthView.octave(info) }\n    },\n    animate: (time) => {\n        synthView.synth.draw(synthView.ctx);\n        synthView.lastTime = time;\n        requestAnimationFrame(synthView.animate);\n    },\n    octave: (obj) => {\n        let oct1, oct2;\n        if (obj.dir === 'up') {\n            oct1 = synthView.synth.osc1oct + 1;\n            oct2 = synthView.synth.osc2oct + 1;\n        }\n        else {\n            oct1 = synthView.synth.osc1oct - 1;\n            oct2 = synthView.synth.osc2oct - 1;\n        }\n        synthView.synth.changeOctave(oct1, 1);\n        synthView.synth.changeOctave(oct2, 2);\n    },\n    increment: (val) => {\n        const keys = Object.keys(synthView.keys);\n        let diff = Math.abs(synthView.inc - val);\n        if (synthView.inc > val)\n            diff *= -1;\n        for (let i = 0; i < keys.length; i++) {\n            const currKey = Number(keys[i]);\n            if (!synthView.keys[currKey].incremented) {\n                synthView.keys[currKey].origin = synthView.keys[currKey].n;\n            }\n            if (synthView.synth.activeVoices[synthView.keys[currKey].n]) {\n                synthView.keys[currKey].incremented = true;\n            }\n            const n = synthView.keys[currKey].n += diff;\n            if (n)\n                synthView.keys[currKey].n = n;\n        }\n        synthView.synth.updateFrequencies(diff);\n        synthView.inc = val;\n        synthView.updateKeyLettering();\n    },\n    updateKeyLettering: () => {\n        const keyLetters = ['A', 'W', 'S', 'E', 'D', 'F', 'T', 'G',\n            'Y', 'H', 'U', 'J', 'K', 'O', 'L', 'P'];\n        const keyValues = Object.keys(synthView.keys);\n        const firstKey = synthView.keys[Number(keyValues[0])].n;\n        const keyDivs = document.querySelectorAll('div[data-keynum]');\n        for (let i = 0; i < keyDivs.length; i++) {\n            keyDivs[i].innerHTML = '';\n        }\n        for (let i = 0; i < keyLetters.length; i++) {\n            const keyString = `div[data-keynum=\"${i + firstKey}\"]`;\n            const keyDiv = document.querySelector(keyString);\n            if (keyDiv)\n                keyDiv.innerHTML = keyLetters[i];\n        }\n    },\n    startSynth: (info) => {\n        synthView.synth.start(info);\n        synthView.pushKey(info.n);\n    },\n    pushKey: (n) => {\n        const keyString = `div[data-key=\"${n}\"]`;\n        const key = document.querySelector(keyString);\n        if (key !== null) {\n            if (Array.from(key.classList).includes('black')) {\n                key.classList.add('playblack');\n            }\n            else {\n                key.classList.add('playwhite');\n            }\n        }\n    },\n    releaseKey: (n) => {\n        const keyString = `div[data-key=\"${n}\"]`;\n        const key = document.querySelector(keyString);\n        if (key !== null) {\n            if (Array.from(key.classList).includes('black')) {\n                key.classList.remove('playblack');\n            }\n            else {\n                key.classList.remove('playwhite');\n            }\n        }\n    },\n    setUpKnobs: () => {\n        const knobs = document.querySelectorAll('canvas.knob');\n        knobs.forEach((canvas) => {\n            const action = canvas.dataset.action ?? '';\n            const min = parseFloat(canvas.dataset.min ?? '0');\n            const max = parseFloat(canvas.dataset.max ?? '100');\n            const step = parseFloat(canvas.dataset.step ?? '1');\n            const initial = parseFloat(canvas.dataset.value ?? '0');\n            initKnob(canvas, min, max, step, initial, (v) => {\n                switch (action) {\n                    case 'tremolo-speed':\n                        synth.changeLFO(v, 'speed', 'tremolo');\n                        break;\n                    case 'tremolo-depth':\n                        synth.changeLFO(v, 'depth', 'tremolo');\n                        break;\n                    case 'vibrato-speed':\n                        synth.changeLFO(v, 'speed', 'vibrato');\n                        break;\n                    case 'vibrato-depth':\n                        synth.changeLFO(v, 'depth', 'vibrato');\n                        break;\n                    case 'tune':\n                        synthView.increment(v);\n                        break;\n                    case 'attack':\n                        synth.envelope.attack = 2 * v / 100;\n                        break;\n                    case 'decay':\n                        synth.envelope.decay = 3 * v / 100;\n                        break;\n                    case 'sustain':\n                        synth.envelope.sustain = v / 100;\n                        break;\n                    case 'release':\n                        synth.envelope.release = 2 * v / 100 + 0.01;\n                        break;\n                    case 'oscVolume':\n                        if (canvas.dataset.osc === '1') {\n                            synth.changeOscVolume(v / 1200, 1);\n                        }\n                        else {\n                            synth.changeOscVolume(v / 1200, 2);\n                        }\n                        break;\n                    case 'octave':\n                        if (canvas.dataset.osc === '1') {\n                            synth.changeOctave(v, 1);\n                        }\n                        else {\n                            synth.changeOctave(v, 2);\n                        }\n                        break;\n                    case 'cutoff':\n                        if (canvas.dataset.osc === '1') {\n                            synth.changeCutoff(v, synth.osc1res, 1);\n                        }\n                        else {\n                            synth.changeCutoff(v, synth.osc2res, 2);\n                        }\n                        break;\n                }\n            });\n        });\n    },\n    setUpOscillatorTypes: () => {\n        const oscSettings = document.querySelectorAll('.osctype');\n        oscSettings.forEach((osc) => {\n            osc.addEventListener('click', (e) => {\n                const target = e.currentTarget;\n                const type = target.getAttribute('data-type');\n                const num = target.getAttribute('data-osc') ?? '';\n                const currSet = document.querySelectorAll(`div[data-osc=\"${num}\"]`);\n                currSet.forEach((osci) => {\n                    osci.classList.remove('active');\n                });\n                synth.changeType(type, num);\n                target.classList.add('active');\n            });\n        });\n    },\n    clearActivePreset: () => {\n        const presets = document.querySelectorAll('.preset');\n        presets.forEach((preset) => {\n            if (Array.from(preset.classList).includes('active')) {\n                preset.classList.remove('active');\n            }\n        });\n    },\n    setUpShowHide: () => {\n        const envelope = document.querySelector('.envelope');\n        const header = document.querySelector('h2');\n        const oscillators = document.querySelector('.oscillator-controls');\n        const bottomLeft = document.querySelector('.bottom-left');\n        const bottomRight = document.querySelector('.bottom-right');\n        const hideButton = document.querySelector('.toggle-controls');\n        hideButton.addEventListener('click', () => {\n            if (Array.from(hideButton.classList).includes('active')) {\n                hideButton.classList.remove('active');\n                hideButton.innerHTML = 'HIDE';\n                envelope?.classList.remove('hide');\n                oscillators?.classList.remove('hide');\n                bottomLeft?.classList.remove('hide');\n                bottomRight?.classList.remove('hide');\n                header?.classList.remove('hide');\n            }\n            else {\n                hideButton.classList.add('active');\n                hideButton.innerHTML = 'SHOW';\n                envelope?.classList.add('hide');\n                bottomLeft?.classList.add('hide');\n                bottomRight?.classList.add('hide');\n                oscillators?.classList.add('hide');\n                header?.classList.add('hide');\n            }\n        });\n    },\n    setUpPresets: () => {\n        synthView.setUpShowHide();\n        const presets = document.querySelectorAll('.preset');\n        presets.forEach((preset) => {\n            preset.addEventListener('click', () => {\n                switch (preset.innerHTML) {\n                    case '1':\n                        synthView.setPreset(0, 7, 55, 10, 50, 1, 9.18, 18, 4, 12.91, 6, 5, 0, 0, 'sine', 'sine');\n                        break;\n                    case '2':\n                        synthView.setPreset(32, 7, 55, 10, 40, 1, 16.74, 55, 3, 12.89, 3.5, 6, 6, 76, 'sawtooth', 'triangle');\n                        break;\n                    case '3':\n                        synthView.setPreset(0, 7, 55, 10, 40, 1, 9.18, 55, 2, 12.91, 2, 2, 8.5, 84, 'triangle', 'triangle');\n                        break;\n                    case '4':\n                        synthView.setPreset(0, 5, 0, 10, 40, 1, 9.18, 55, 3, 18.88, 0, 0, 0, 0, 'sawtooth', 'triangle');\n                        break;\n                    case '5':\n                        synthView.setPreset(24, 0, 100, 10, 40, 1, 6.62, 55, 3, 11.83, 3.5, 2, 1.5, 45, 'square', 'sawtooth');\n                        break;\n                }\n                synthView.clearActivePreset();\n                preset.classList.add('active');\n            });\n        });\n    },\n    setPreset: (attack, decay, sustain, release, osc1vol, osc1oct, osc1cutoff, osc2vol, osc2oct, osc2cutoff, vibratoSpeed, vibratoDepth, tremoloSpeed, tremoloDepth, osc1type, osc2type) => {\n        setKnobValue(getKnob('attack'), attack, true);\n        setKnobValue(getKnob('decay'), decay, true);\n        setKnobValue(getKnob('sustain'), sustain, true);\n        setKnobValue(getKnob('release'), release, true);\n        setKnobValue(getKnob('oscVolume', '1'), osc1vol, true);\n        setKnobValue(getKnob('oscVolume', '2'), osc2vol, true);\n        setKnobValue(getKnob('octave', '1'), osc1oct, true);\n        setKnobValue(getKnob('octave', '2'), osc2oct, true);\n        setKnobValue(getKnob('cutoff', '1'), osc1cutoff, true);\n        setKnobValue(getKnob('cutoff', '1'), osc2cutoff, true); // bug preserved: osc=\"1\" used twice\n        setKnobValue(getKnob('tremolo-speed'), tremoloSpeed, true);\n        setKnobValue(getKnob('tremolo-depth'), tremoloDepth, true);\n        setKnobValue(getKnob('vibrato-speed'), vibratoSpeed, true);\n        setKnobValue(getKnob('vibrato-depth'), vibratoDepth, true);\n        document.querySelector(`.osctype[data-type=\"${osc1type}\"][data-osc=\"1\"]`)?.click();\n        document.querySelector(`.osctype[data-type=\"${osc2type}\"][data-osc=\"2\"]`)?.click();\n    },\n    start: () => {\n        const keys = synthView.keys;\n        synthView.setUpPresets();\n        synthView.setUpKnobs();\n        synthView.setUpOscillatorTypes();\n        requestAnimationFrame(synthView.animate);\n        document.addEventListener('keydown', (e) => {\n            synthView.synth.context.resume();\n            const keyInfo = keys[e.keyCode];\n            if (keyInfo) {\n                if (keyInfo.down)\n                    return;\n                keyInfo.down = true;\n                keyInfo.action(keyInfo);\n            }\n        });\n        document.addEventListener('keyup', (e) => {\n            const keyInfo = keys[e.keyCode];\n            if (keyInfo) {\n                keyInfo.down = false;\n                if (keyInfo.type === 'octave')\n                    return;\n                const n = keyInfo.n;\n                if (keyInfo.incremented) {\n                    synthView.synth.stop(keyInfo.origin ?? n);\n                    synthView.releaseKey(keyInfo.origin ?? n);\n                    keyInfo.incremented = false;\n                }\n                else {\n                    synthView.synth.stop(n);\n                    synthView.releaseKey(n);\n                }\n            }\n        });\n        synthView.synth.tremoloLfo.connect(synthView.synth.tremoloAmp);\n        synthView.synth.tremoloAmp.connect(synthView.synth.volume.gain.gain);\n        synthView.synth.volume.connect(synthView.synth.compressor);\n        synthView.synth.compressor.connect(synthView.synth.context.destination);\n        synthView.synth.tremoloLfo.start();\n    }\n};\n","import makeVoice from './voice';\nimport makeAmp from './audio/amp';\nimport makeLFO from './audio/lfo';\nconst makeSynth = () => {\n    const canvas = document.querySelector('#canvas');\n    const WIDTH = canvas.width;\n    const HEIGHT = canvas.height;\n    const context = new AudioContext();\n    const compressor = context.createDynamicsCompressor();\n    compressor.threshold.value = -45;\n    compressor.knee.value = 40;\n    compressor.ratio.value = 12;\n    compressor.attack.value = 0.25;\n    compressor.release.value = 0.25;\n    const volume = makeAmp(context);\n    const synth = {\n        context,\n        activeVoices: {},\n        destination: context.destination,\n        volume,\n        compressor,\n        tremoloAmp: makeAmp(context, 0),\n        tremoloLfo: makeLFO(context, 0),\n        vibratoSpeed: 0,\n        vibratoDepth: 0,\n        tremoloSpeed: 0,\n        tremoloDepth: 0,\n        osc1type: 'sine',\n        osc2type: 'sine',\n        osc1cutoff: 22,\n        osc2cutoff: 22,\n        osc1vol: 0.0416,\n        osc2vol: 0.0208,\n        osc1oct: 1,\n        osc2oct: 2,\n        envelope: { attack: 0, decay: 0, sustain: 1, release: 0.5 },\n        start: (key) => {\n            const n = key.n;\n            const frequency = synth.calculateFrequency(n);\n            synth.activeVoices[n] = makeVoice(context, n, frequency, volume, synth.osc1type, synth.osc2type, synth.osc1vol, synth.osc2vol, synth.osc1oct, synth.osc2oct, synth.osc1cutoff, synth.osc2cutoff, synth.vibratoSpeed, synth.vibratoDepth);\n            synth.activeVoices[n].connect();\n            synth.activeVoices[n].start(synth.envelope);\n        },\n        draw: (ctx) => {\n            ctx.clearRect(0, 0, WIDTH, HEIGHT);\n            const voiceKeys = Object.keys(synth.activeVoices);\n            voiceKeys.forEach((key) => {\n                const voice = synth.activeVoices[Number(key)];\n                voice.analyser.draw(ctx, voice.frequency);\n            });\n        },\n        updateFrequencies: (diff) => {\n            const voiceKeys = Object.keys(synth.activeVoices);\n            for (let i = 0; i < voiceKeys.length; i++) {\n                const voice = synth.activeVoices[Number(voiceKeys[i])];\n                voice.n += diff;\n                const freq = synth.calculateFrequency(voice.n);\n                voice.changeFrequency(freq);\n            }\n        },\n        changeLFO: (value, control, type) => {\n            if (type === 'vibrato') {\n                if (control === 'speed') {\n                    synth.vibratoSpeed = value;\n                }\n                else {\n                    synth.vibratoDepth = value;\n                }\n            }\n            else if (type === 'tremolo') {\n                if (control === 'speed') {\n                    synth.tremoloSpeed = value;\n                    synth.tremoloLfo.lfoFrequency.value = value;\n                }\n                else {\n                    const v = value / 1000;\n                    synth.tremoloDepth = v;\n                    synth.tremoloAmp.gain.gain.value = v;\n                }\n            }\n            const voiceKeys = Object.keys(synth.activeVoices);\n            for (let i = 0; i < voiceKeys.length; i++) {\n                if (type === 'vibrato') {\n                    if (control === 'speed') {\n                        synth.activeVoices[Number(voiceKeys[i])].lfoVibrato.changeFrequency(synth.vibratoSpeed);\n                    }\n                    else {\n                        synth.activeVoices[Number(voiceKeys[i])].lfoVibratoAmp.changeAmplitude(synth.vibratoDepth);\n                    }\n                }\n            }\n        },\n        changeOscVolume: (vol, osc) => {\n            if (osc === 1) {\n                synth.osc1vol = vol;\n            }\n            else {\n                synth.osc2vol = vol;\n            }\n            const voiceKeys = Object.keys(synth.activeVoices);\n            for (let i = 0; i < voiceKeys.length; i++) {\n                if (osc === 1) {\n                    synth.activeVoices[Number(voiceKeys[i])].amp1.changeAmplitude(synth.osc1vol);\n                }\n                else {\n                    synth.activeVoices[Number(voiceKeys[i])].amp2.changeAmplitude(synth.osc2vol);\n                }\n            }\n        },\n        changeOctave: (octave, osc) => {\n            if (osc === 1) {\n                synth.osc1oct = octave;\n            }\n            else {\n                synth.osc2oct = octave;\n            }\n            const voiceKeys = Object.keys(synth.activeVoices);\n            for (let i = 0; i < voiceKeys.length; i++) {\n                if (osc === 1) {\n                    synth.activeVoices[Number(voiceKeys[i])].oscillator1.changeOctave(synth.osc1oct);\n                }\n                else {\n                    synth.activeVoices[Number(voiceKeys[i])].oscillator2.changeOctave(synth.osc2oct);\n                }\n            }\n        },\n        changeCutoff: (freq, _res, osc) => {\n            if (osc === 1) {\n                synth.osc1cutoff = freq;\n            }\n            else {\n                synth.osc2cutoff = freq;\n            }\n            const voiceKeys = Object.keys(synth.activeVoices);\n            for (let i = 0; i < voiceKeys.length; i++) {\n                if (osc === 1) {\n                    synth.activeVoices[Number(voiceKeys[i])].filter1.changeFilter(freq);\n                }\n                else {\n                    synth.activeVoices[Number(voiceKeys[i])].filter2.changeFilter(freq);\n                }\n            }\n        },\n        changeType: (type, osc) => {\n            if (osc === '1') {\n                synth.osc1type = type;\n            }\n            else {\n                synth.osc2type = type;\n            }\n        },\n        stop: (n) => {\n            n = synth.handleOctaveChange(n);\n            const voice = synth.activeVoices[n];\n            voice.stop(synth.envelope.release);\n            delete synth.activeVoices[n];\n        },\n        handleOctaveChange: (n) => {\n            let order = 1;\n            while (!synth.activeVoices[n]) {\n                const inc = 12;\n                if (synth.activeVoices[n + (inc * order)]) {\n                    n = n + (inc * order);\n                }\n                else if (synth.activeVoices[n - (inc * order)]) {\n                    n = n - (inc * order);\n                }\n                order += 1;\n            }\n            return n;\n        },\n        calculateFrequency: (n) => Math.pow(2, (n - 49) / 12) * 440\n    };\n    return synth;\n};\nexport default makeSynth;\n","import { synthView } from './synth-view';\ndocument.addEventListener('DOMContentLoaded', () => synthView.start());\n"],"names":["context","n","frequency","type","oct","oscillator","createOscillator","wrapper","input","output","start","value","Math","pow","changeType","newType","changeFrequency","freq","changeOctave","_octave","connect","node","AudioParam","vol","gain","createGain","amplitude","changeAmplitude","v","param","envOn","attackTime","decayTime","sustainVal","now","currentTime","cancelScheduledValues","setValueAtTime","linearRampToValueAtTime","envOff","releaseTime","p","cutoff","filter","createBiquadFilter","changeFilter","newFreq","lfo","lfoFrequency","newFrequency","volume","type1","type2","vol1","vol2","oct1","oct2","cutoff1","cutoff2","vibratoSpeed","vibratoDepth","lfoVibrato","analyser","canvas","document","querySelector","createAnalyser","fftSize","bufferLength","frequencyBinCount","dataArray","Uint8Array","WIDTH","width","HEIGHT","height","draw","ctx","color","getByteTimeDomainData","lineWidth","strokeStyle","beginPath","sliceWidth","x","i","y","moveTo","lineTo","stroke","lfoVibratoAmp","oscillator1","oscillator2","amp1","amp2","envelope1","envelope2","filter1","filter2","envelope","attack","decay","sustain","stop","setTimeout","disconnect","knobMap","WeakMap","START","PI","SWEEP","drawKnob","state","getContext","min","max","ratio","w","h","cx","cy","r","clearRect","arc","decimals","step","ceil","log10","label","toFixed","fillStyle","font","textAlign","textBaseline","fillText","setKnobValue","fireCallback","get","onRelease","getKnob","action","osc","selector","AudioContext","compressor","createDynamicsCompressor","threshold","knee","release","synth","activeVoices","destination","tremoloAmp","tremoloLfo","tremoloSpeed","tremoloDepth","osc1type","osc2type","osc1cutoff","osc2cutoff","osc1vol","osc2vol","osc1oct","osc2oct","key","calculateFrequency","Object","keys","forEach","voice","Number","updateFrequencies","diff","voiceKeys","length","changeLFO","control","changeOscVolume","octave","changeCutoff","_res","handleOctaveChange","order","inc","synthView","lastTime","down","info","startSynth","dir","animate","time","requestAnimationFrame","obj","increment","val","abs","currKey","incremented","origin","updateKeyLettering","keyLetters","keyValues","firstKey","keyDivs","querySelectorAll","innerHTML","keyString","keyDiv","pushKey","Array","from","classList","includes","add","releaseKey","remove","setUpKnobs","dataset","parseFloat","initial","set","startY","startValue","onMouseMove","e","delta","clientY","range","newValue","stepped","round","onMouseUp","removeEventListener","addEventListener","preventDefault","initKnob","osc1res","osc2res","setUpOscillatorTypes","target","currentTarget","getAttribute","num","osci","clearActivePreset","preset","setUpShowHide","header","oscillators","bottomLeft","bottomRight","hideButton","setUpPresets","setPreset","click","resume","keyInfo","keyCode"],"sourceRoot":""}